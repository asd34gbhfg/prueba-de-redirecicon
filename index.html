<!DOCTYPE html>
<html>
<head>
    <title>Redirección por IP y país</title>
</head>
<body>
    <script>
        // Función para obtener el valor de un parámetro en la URL
        function getParameterByName(name, url) {
            if (!url) url = window.location.href;
            name = name.replace(/[\[\]]/g, "\\$&");
            var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, " "));
        }

        // Obtenemos los valores de ID, IP y país de la URL
        var id = getParameterByName('id');
        var ip = getParameterByName('ip');
        var country = getParameterByName('country');

        // Validar la IP (puedes usar una expresión regular más robusta)
        var validIP = /^[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+$/.test(ip);

        if (validIP) {
            // Redirigir si la IP es válida
            var destinationURL = 'https://tudominio.com/destino?id=' + id + '&ip=' + ip + '&country=' + country;
            window.location.href = destinationURL;
        } else {
            document.write('<p>La IP proporcionada no es válida.</p>');
        }
    </script>
</body>
</html>
